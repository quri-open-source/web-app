<div class="create-project-container">
  <div class="page-header">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1>{{ 'design.create_new_project' | translate }}</h1>
  </div>

  <div class="create-form-container">
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">
      <mat-card>
        <mat-card-content>
          <div class="form-layout">
            <div class="form-fields">
              <h2>{{ 'design.project_details' | translate }}</h2>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{ 'design.project_name' | translate }}</mat-label>
                <input
                  matInput
                  formControlName="name"
                  [placeholder]="'design.enter_project_name' | translate"
                />
                <mat-error
                  *ngIf="projectForm.get('name')?.hasError('required')"
                >
                  {{ 'design.name_required' | translate }}
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{ 'product.gender' | translate }}</mat-label>
                <mat-select formControlName="gender">
                  <mat-option value="WOMEN">{{ 'design.women' | translate }}</mat-option>
                  <mat-option value="MEN">{{ 'design.men' | translate }}</mat-option>
                  <mat-option value="KIDS">{{ 'design.kids' | translate }}</mat-option>
                  <mat-option value="UNISEX">{{ 'design.unisex' | translate }}</mat-option>
                </mat-select>
                <mat-error
                  *ngIf="projectForm.get('gender')?.hasError('required')"
                >
                  {{ 'design.gender_required' | translate }}
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="full-width">
                <mat-label>{{ 'product.size' | translate }}</mat-label>
                <mat-select formControlName="garmentSize">
                  <mat-option value="XS">{{ 'design.xs' | translate }}</mat-option>
                  <mat-option value="S">{{ 'design.s' | translate }}</mat-option>
                  <mat-option value="M">{{ 'design.m' | translate }}</mat-option>
                  <mat-option value="L">{{ 'design.l' | translate }}</mat-option>
                  <mat-option value="XL">{{ 'design.xl' | translate }}</mat-option>
                  <mat-option value="XXL">{{ 'design.xxl' | translate }}</mat-option>
                </mat-select>
                <mat-error
                  *ngIf="
                    projectForm.get('garmentSize')?.hasError('required')
                  "
                >
                  {{ 'design.size_required' | translate }}
                </mat-error>
              </mat-form-field>

              <h3>{{ 'design.tshirt_color' | translate }}</h3>
              <div class="color-grid-container">
                <mat-grid-list cols="4" rowHeight="50px">
                  <ng-container *ngFor="let color of garmentColors">
                  <mat-grid-tile>
                    <div
                      class="color-swatch"
                      [style.background-color]="color.value"
                      [class.selected]="
                        projectForm.get('garmentColor')?.value ===
                        color.value
                      "
                      (click)="selectColor(color.value)"
                      [matTooltip]="'design.' + color.label | translate"
                    ></div>
                  </mat-grid-tile>
                  </ng-container>
                </mat-grid-list>
              </div>
            </div>

            <div class="preview-container">
              <h2>{{ 'design.preview' | translate }}</h2>
              <div class="tshirt-preview">
                <div class="tshirt-container">
                  <div class="tshirt-image">
                    <div
                      class="cropped-image"
                      [style.background-image]="
                        'url(' + garmentColorImages + ')'
                      "
                      [style.background-position]="
                        getBackgroundPosition(
                          projectForm.get('garmentColor')?.value
                        )
                      "
                    ></div>
                  </div>
                </div>
              </div>

              <div
                class="preview-details"
                *ngIf="projectForm.get('name')?.value"
              >
                <h3>{{ projectForm.get('name')?.value }}</h3>
                <p *ngIf="projectForm.get('gender')?.value">
                  {{ 'product.gender' | translate }}:
                  {{ getGenderLabel(projectForm.get('gender')?.value) }}
                </p>
                <p *ngIf="projectForm.get('garmentSize')?.value">
                  {{ 'product.size' | translate }}: {{ projectForm.get('garmentSize')?.value }}
                </p>
                <p>
                  {{ 'product.color' | translate }}:
                  <span class="color-name">{{
                    getColorLabel(projectForm.get('garmentColor')?.value)
                  }}</span>
                  <span
                    class="color-preview"
                    [style.background-color]="
                      projectForm.get('garmentColor')?.value
                    "
                  ></span>
                </p>
              </div>
            </div>
          </div>
        </mat-card-content>

        <mat-card-actions align="end">
          <button mat-button type="button" (click)="goBack()">
            {{ 'common.cancel' | translate }}
          </button>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="projectForm.invalid || isSubmitting"
          >
            <mat-icon>save</mat-icon>
            {{ 'design.create_project_button' | translate }}
          </button>
        </mat-card-actions>
      </mat-card>
    </form>
  </div>
</div>
